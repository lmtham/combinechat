<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>n8n Chat Widget</title>
    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
    <style>
        :root {
            --chat--toggle--background: #ffb6c1; /* Light pink */
            --chat--toggle--hover--background: #ffa3b0; /* Slightly darker pink on hover */
            --chat--toggle--active--background: #ff8fa0; /* Darker pink on active */
            --chat--toggle--border-radius: 0; /* Rectangular shape */
            --chat--toggle--size: 80px; /* Adjust size if needed */
            --chat--window--width: 650px; /* Wider window */
            --chat--window--height: 110vh; /* Taller window for more chat history */
            --chat--spacing: 0.5rem;
            --chat--border-radius: 0.20rem;
            --chat--header-height: auto; /* Smaller header */
            --chat--header--padding: var(--chat--spacing); /* Less padding */
            --chat--heading--font-size: 1.4em; /* Smaller font for header */
            --chat--subtitle--font-size: 0.9em; /* Smaller subtitle font */
            --chat--message--font-size: 0.8rem; /* Smaller font for messages */
            --chat--textarea--height: 65px; /* Input box height */
        }
    </style>
</head>
<body>
    <script type="module">
        import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';
        
        createChat({
            webhookUrl: 'https://n8ncloud2.onrender.com/webhook/2f82c208-de56-4c9d-8028-c5bfbe4f1428/chat',
            mode: 'window',
            showWelcomeScreen: false,
            initialMessages: [],
            i18n: {
                en: {
                    getStarted: 'Start New Conversation',
                    inputPlaceholder: 'Type your question..',
                    title: 'Welcome to RichardLaw&Co!ðŸ‘‹',
                    subtitle: "Start a chat. We're here to help you 24/7.",
                },
            },
            styleOverrides: {
                '--chat--message--font-size': '0.75rem',
            },
            onLoad: (chatWindow) => {
                const chatInput = chatWindow.querySelector('textarea');
                chatInput.style.display = 'none';

                const startButton = document.createElement('button');
                startButton.innerText = 'Start New Conversation';
                startButton.style.width = '100%';
                startButton.style.padding = '10px';
                startButton.style.textAlign = 'center';
                startButton.style.backgroundColor = '#20b69e';
                startButton.style.border = 'none';
                startButton.style.color = '#fff';
                startButton.style.fontSize = '1.2em';

                const chatHistory = chatWindow.querySelector('.n8n-chat-history');
                const header = chatWindow.querySelector('.n8n-chat-header');
                header.appendChild(startButton);

                startButton.addEventListener('click', () => {
                    chatWindow.sendMessage('Hi there! ðŸ‘‹ How can I assist you today?');
                    startButton.style.display = 'none';
                    chatInput.style.display = 'block';
                    chatInput.focus();
                });
            },
        });
    </script>
</body>
</html>
