<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Widget</title>
    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
    <style>
        /* Custom styling for rectangular toggle button */
        .n8n-chat-toggle-button {
            width: 120px !important;
            height: 50px !important;
            border-radius: 5px !important;
            background-color: #20b69e !important;
            color: #fff !important;
            font-size: 1rem !important;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <script type="module">
        const style = document.createElement('style');
        style.innerHTML = `
            :root {
                --chat--window--width: 650px;
                --chat--window--height: 110vh;
                --chat--spacing: 0.5rem;
                --chat--border-radius: 0.20rem;
                --chat--header-height: auto;
                --chat--header--padding: var(--chat--spacing);
                --chat--heading--font-size: 1.4em;
                --chat--subtitle--font-size: 0.9em;
                --chat--message--font-size: 0.8rem;
                --chat--textarea--height: 65px;
                --chat--toggle--size: 64px;
            }
        `;
        document.head.appendChild(style);

        import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

        createChat({
            webhookUrl: 'https://n8ncloud2.onrender.com/webhook/2f82c208-de56-4c9d-8028-c5bfbe4f1428/chat',
            mode: 'fullscreen',
            showWelcomeScreen: false,
            initialMessages: [],
            i18n: {
                en: {
                    getStarted: 'Start New Conversation',
                    inputPlaceholder: 'Type your question..',
                    title: 'Welcome to RichardLaw&Co!ðŸ‘‹',
                    subtitle: "Start a chat. We're here to help you 24/7.",
                },
            },
            styleOverrides: {
                '--chat--message--font-size': '0.75rem',
            },
            onLoad: (chatWindow) => {
                const chatInput = chatWindow.querySelector('textarea');
                chatInput.style.display = 'none';

                const startButton = document.createElement('button');
                startButton.innerText = 'Start New Conversation';
                startButton.style.width = '100%';
                startButton.style.padding = '10px';
                startButton.style.textAlign = 'center';
                startButton.style.backgroundColor = '#20b69e';
                startButton.style.border = 'none';
                startButton.style.color = '#fff';
                startButton.style.fontSize = '1.2em';

                const header = chatWindow.querySelector('.n8n-chat-header');
                header.appendChild(startButton);

                startButton.addEventListener('click', () => {
                    chatWindow.sendMessage('Hi there! ðŸ‘‹ How can I assist you today?');
                    startButton.style.display = 'none';
                    chatInput.style.display = 'block';
                    chatInput.focus();
                });
            },
        });
    </script>
</body>
</html>
